<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Selamat Ulang Tahun, Sayang!</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />

  <style>
    /* --- Pengaturan Dasar --- */
    :root {
      --bg-color: #fde2e4;
      --text-color: #2a2a2a;
      --primary-color: #e78f8f;
      --secondary-color: #f4acb7;
      --heart-color: #ff4d6d;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      width: 100%; height: 100%;
      font-family: "Poppins", sans-serif;
      overflow: hidden;
      background: linear-gradient(135deg, var(--bg-color), #fff1f2);
      display: flex; justify-content: center; align-items: center;
    }

    /* ================= Intro screen ================= */
    #intro-screen {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      background: var(--bg-color);
      z-index: 100;
      transition: opacity 1.5s ease-in-out;
      cursor: pointer;
    }
    #intro-screen.hidden { opacity: 0; pointer-events: none; }

    .flower-container { position: relative; width: 250px; height: 250px; animation: sway 5s ease-in-out infinite; }
    @keyframes sway { 0%,100%{transform:rotate(5deg);} 50%{transform:rotate(-5deg);} }
    .flower  { position: absolute; width: 100%; height: 100%; }
    .petal   { position: absolute; width: 100px; height: 150px; left: 75px; top: 0;
               background: linear-gradient(to bottom, #ffc2d1, #ff8fab);
               border-radius: 50px 50px 0 0; transform-origin: bottom center;
               transition: transform 1.5s cubic-bezier(.68,-.55,.27,1.55); }
    .petal1 { transform: rotate(0deg)   scale(.8); }
    .petal2 { transform: rotate(60deg)  scale(.8); }
    .petal3 { transform: rotate(120deg) scale(.8); }
    .petal4 { transform: rotate(180deg) scale(.8); }
    .petal5 { transform: rotate(240deg) scale(.8); }
    .petal6 { transform: rotate(300deg) scale(.8); }

    .flower-center { position:absolute; width:80px; height:80px; background:#ffe54c; border-radius:50%;
                     left:50%; top:50%; transform:translate(-50%,-50%); z-index:10; }

    .flower.bloomed .petal { transform: scale(1); }
    .flower.bloomed .petal1 { transform: rotate(25deg)  translateY(-50px) scale(1); }
    .flower.bloomed .petal2 { transform: rotate(85deg)  translateY(-50px) scale(1); }
    .flower.bloomed .petal3 { transform: rotate(145deg) translateY(-50px) scale(1); }
    .flower.bloomed .petal4 { transform: rotate(205deg) translateY(-50px) scale(1); }
    .flower.bloomed .petal5 { transform: rotate(265deg) translateY(-50px) scale(1); }
    .flower.bloomed .petal6 { transform: rotate(325deg) translateY(-50px) scale(1); }

    .intro-text { margin-top:40px; font-size:1.2rem; color:var(--primary-color); font-weight:600; animation:fadeIn 2s ease-in-out; }
    @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }

    /* ================= Slides ================= */
    #main-content { width: 100%; height: 100%; position: relative; }

    .slide {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      display: flex; justify-content: center; align-items: center;
      padding: 20px;
      opacity: 0; visibility: hidden; transform: scale(.95);
      transition: opacity 1.2s ease-in-out, transform 1.2s ease-in-out;
    }
    .slide.active { opacity: 1; visibility: visible; transform: scale(1); z-index: 10; }

    .slide-content {
      display: flex; flex-direction: column; align-items: center; text-align: center;
      background: rgba(255,255,255,.7); backdrop-filter: blur(10px);
      padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,.1);
      width: 600px; max-width: 90%;
      position: relative; /* tempat bunga jatuh */
    }

    #slide2 .slide-content { flex-direction: row-reverse; text-align: right; }
    #slide1 .slide-content { flex-direction: row;        text-align: left;  }
    @media (max-width:768px){
      #slide1 .slide-content,#slide2 .slide-content{
        flex-direction: column; text-align: center;
      }
    }

    .slide img {
      width: 200px; height: 200px; object-fit: cover;
      border-radius: 15px; margin: 20px; border: 5px solid #fff;
      box-shadow: 0 5px 15px rgba(0,0,0,.15);
    }

    .slide h1 { font-family:'Great Vibes',cursive; font-size:3rem; color:var(--primary-color); margin-bottom:15px; }
    .slide p  { color:var(--text-color); font-size:1rem; line-height:1.6; margin-bottom:25px; }

    .next-button {
      padding: 12px 25px; border:none; cursor:pointer;
      background: linear-gradient(45deg,var(--primary-color),var(--secondary-color));
      color:#fff; border-radius:50px; font-weight:600;
      box-shadow:0 4px 15px rgba(231,143,143,.5); transition:.3s;
    }
    .next-button:hover { transform: translateY(-3px); box-shadow:0 7px 20px rgba(244,172,183,.7); }

    /* Slide 3 heart button */
    #slide3 .next-button {
      position: relative; width:80px; height:80px; padding:0;
      background:none; box-shadow:none;
    }
    #slide3 .next-button:hover { transform:scale(1.1); }

    .heart-animation { position:absolute; inset:0; animation:beat 1.3s infinite; }
    .heart-animation::before,
    .heart-animation::after {
      content:''; position:absolute; top:0; width:40px; height:65px;
      background:var(--heart-color); border-radius:50px 50px 0 0;
    }
    .heart-animation::before { left:40px; transform:rotate(-45deg); transform-origin:0 100%; }
    .heart-animation::after  { left:0;   transform:rotate(45deg);  transform-origin:100% 100%; }
    @keyframes beat { 0%{transform:scale(1);} 50%{transform:scale(1.1);} 100%{transform:scale(1);} }

    /* Slide terakhir */
    #slide4 .slide-content{ background:none; box-shadow:none; backdrop-filter:none; }
    #slide4 h1{ font-size:4rem; }
    #slide4 p { font-size:1.2rem; }

    /* ================= BUNGA JATUH ================= */
    .flower-fall{
      position:absolute; width:25px; height:25px;
      background-size:contain; background-repeat:no-repeat;
      pointer-events:none; animation:fall linear infinite;
      z-index:0;
    }
    @keyframes fall{
      0%{ transform:translateY(-100px) rotate(0deg); opacity:1; }
      100%{ transform:translateY(100vh) rotate(360deg); opacity:0; }
    }
  </style>
</head>

<body>
  <!-- Musik -->
  <audio id="background-music" loop autoplay muted>
    <source src="ulang-tahun.mp3" type="audio/mpeg" />
  </audio>

  <!-- Intro -->
  <div id="intro-screen">
    <div class="flower-container">
      <div class="flower" id="flower">
        <div class="petal petal1"></div><div class="petal petal2"></div>
        <div class="petal petal3"></div><div class="petal petal4"></div>
        <div class="petal petal5"></div><div class="petal petal6"></div>
        <div class="flower-center"></div>
      </div>
    </div>
    <p class="intro-text">Sentuh bunga ini ya sayang...</p>
  </div>

  <!-- Slides -->
  <div id="main-content" style="visibility:hidden;">
    <!-- SLIDE 1 -->
    <div class="slide active" id="slide1">
      <div class="slide-content">
        <img src="foto1.jpeg" alt="Foto pasangan 1" />
        <div class="text-container">
          <h1>Selamat Ulang Tahun!</h1>
          <p>Untuk orang paling spesial di hidupku. Hari ini adalah hari bahagiamu, dan aku ingin memulainya dengan kenangan indah kita.</p>
          <button class="next-button" data-next="2">Lihat selanjutnya...</button>
        </div>
        <!-- wadah bunga jatuh -->
        <div class="fall-container" data-slide="1"></div>
      </div>
    </div>

    <!-- SLIDE 2 -->
    <div class="slide" id="slide2">
      <div class="slide-content">
        <img src="foto2.jpeg" alt="Foto pasangan 2" />
        <div class="text-container">
          <h1>Setiap Momen...</h1>
          <p>...bersamamu adalah anugerah. Terima kasih sudah membawa begitu banyak tawa dan warna dalam hidupku. Aku sangat bersyukur memilikimu.</p>
          <button class="next-button" data-next="3">Ada lagi lho...</button>
        </div>
        <div class="fall-container" data-slide="2"></div>
      </div>
    </div>

    <!-- SLIDE 3 -->
    <div class="slide" id="slide3">
      <div class="slide-content">
        <img src="foto3.jpeg" alt="Foto pasangan 3" />
        <div class="text-container">
          <h1>Harapanku Untukmu</h1>
          <p>Semoga di usiamu yang baru, kamu selalu diberi kesehatan, kebahagiaan yang tak terhingga, dan semua impianmu tercapai. Aku akan selalu di sini mendukungmu.</p>
          <button class="next-button" data-next="4">
            <div class="heart-animation"></div>
          </button>
        </div>
        <div class="fall-container" data-slide="3"></div>
      </div>
    </div>

    <!-- SLIDE 4 -->
    <div class="slide" id="slide4">
      <div class="slide-content">
        <h1>I Love You</h1>
        <p>Lebih dari kata-kata yang bisa kuungkapkan. Dulu, sekarang, dan selamanya. Selamat ulang tahun sekali lagi, cintaku.</p>
        <div class="fall-container" data-slide="4"></div>
      </div>
    </div>
  </div>

  <!-- ================= Script ================= -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      /* --------- Elemen penting --------- */
      const introScreen  = document.getElementById("intro-screen");
      const flower       = document.getElementById("flower");
      const mainContent  = document.getElementById("main-content");
      const music        = document.getElementById("background-music");
      const nextButtons  = document.querySelectorAll(".next-button");

      /* --------- Musik --------- */
      function playMusic() {
        music.muted = false;
        music.play().catch(()=>{});
      }

      /* --------- Intro klik --------- */
      introScreen.addEventListener("click", () => {
        playMusic();
        flower.classList.add("bloomed");
        introScreen.querySelector(".intro-text").style.opacity = "0";

        setTimeout(() => {
          introScreen.classList.add("hidden");
          mainContent.style.visibility = "visible";
          setTimeout(() => { introScreen.style.display = "none"; }, 1500);
        }, 1500);
      });

      /* --------- Navigasi slide --------- */
      nextButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          const current = btn.closest(".slide");
          const nextId  = "slide" + btn.dataset.next;
          const next    = document.getElementById(nextId);
          if (current && next) {
            current.classList.remove("active");
            next.classList.add("active");
          }
        });
      });

      /* --------- Bunga jatuh --------- */
      const flowerImages = {
        1: "https://cdn-icons-png.flaticon.com/512/2909/2909592.png", // mawar
        2: "https://cdn-icons-png.flaticon.com/512/3533/3533448.png", // sakura
        3: "https://cdn-icons-png.flaticon.com/512/3082/3082383.png", // daisy
        4: "https://cdn-icons-png.flaticon.com/512/3262/3262973.png"  // matahari
      };

      function createFallingFlower(slideNum) {
        const container = document.querySelector(#slide${slideNum} .fall-container);
        if (!container) return;
        const f = document.createElement("div");
        f.className = "flower-fall";
        f.style.left = Math.random() * 100 + "%";
        f.style.animationDuration = 3 + Math.random() * 2 + "s";
        f.style.backgroundImage = url('${flowerImages[slideNum]}');
        container.appendChild(f);
        setTimeout(() => f.remove(), 5000);
      }

      /* bikin kelopak tiap 0.5 detik di slide aktif */
      setInterval(() => {
        const active = document.querySelector(".slide.active");
        if (!active) return;
        const num = active.id.replace("slide", "");
        createFallingFlower(num);
      }, 500);
    });
  </script>
</body>
</html>
